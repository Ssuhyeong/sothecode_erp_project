{"ast":null,"code":"import _regeneratorRuntime from\"/home/song/serp_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/song/serp_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/song/serp_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from\"react\";import{Box,Typography,Button}from'@mui/material';import AddIcon from'@mui/icons-material/Add';import Modal from'@mui/material/Modal';import Header from'src/components/Header';import SearchField from'src/components/SearchField';import CompanyTable from'src/components/CompanyInfo/CompanyTable';import CompanyDetails from'src/components/CompanyInfo/CompanyDetails';import CompanyModal from'src/components/CompanyInfo/CompanyModal';import axios from\"../../../utils/axios\";import{useQuery}from'react-query';import{matchSorter}from'match-sorter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var modalStyle={position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',bgcolor:'background.paper',width:\"580px\",height:\"669px\",borderRadius:\"8px\",backgroundColor:\"#fff\"};var CompanyInfoView=function CompanyInfoView(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchValue=_useState2[0],setSearchValue=_useState2[1];var _useState3=useState(-1),_useState4=_slicedToArray(_useState3,2),selectedCompany=_useState4[0],setSelectedCompany=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalOpen=_useState6[0],setModalOpen=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),modalData=_useState8[0],setModalData=_useState8[1];var tableKeys=['company_name','represent','corporate_number','description','director','position','email','phone_number','address'];var query=useQuery(['companys'],/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/companys/info',{company_type:'발주처'});case 2:_yield$axios$post=_context.sent;data=_yield$axios$post.data;return _context.abrupt(\"return\",data.data);case 5:case\"end\":return _context.stop();}}},_callee);})));var onAppendCompany=function onAppendCompany(statue){setModalData(false);// insert_modal\nsetModalOpen(true);// 모달 창 띄우기\n};var onEditClick=function onEditClick(idx){setModalData(query.data.find(function(element){return element.idx===idx;}));// update_modal\nsetModalOpen(true);// 모달 창 띄우기\nsetSelectedCompany(idx);};// 보여질 데이터 정렬\nvar getCompanys=function getCompanys(){return matchSorter(query.data,searchValue,{keys:tableKeys});};// 테이블 클릭 시 옆에 보여질 디테일 정보\nvar getCompanyDetails=function getCompanyDetails(){if(selectedCompany<0)return null;return query.data.find(function(element){return element.idx===selectedCompany;});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{children:\"\\uC5C5\\uCCB4\\uC815\\uBCF4\"}),query.isLoading?/*#__PURE__*/_jsx(\"div\",{children:\" Loading \"}):/*#__PURE__*/_jsxs(Box,{sx:{height:\"100%\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(SearchField,{placeholder:\"\\uC5C5\\uCCB4\\uBA85, \\uC5F0\\uB77D\\uCC98 \\uB4F1 \\uAC80\\uC0C9\",setSearchValue:setSearchValue}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",sx:{fontWeight:600,width:\"94px\",height:\"37px\",padding:\"9.5px 0px\",fontSize:\"13px\",\"& .MuiButton-startIcon\":{margin:\"0px\"}},startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:function onClick(){onAppendCompany();},children:\"\\uC5C5\\uCCB4\\uB4F1\\uB85D\"})]}),/*#__PURE__*/_jsxs(Typography,{sx:{fontWeight:600,fontSize:\"12px\",mt:\"19px\",mb:\"10px\"},children:[\"\\uCD1D \\uC5C5\\uCCB4(\",getCompanys().length,\")\"]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",height:'100%'},children:[/*#__PURE__*/_jsx(CompanyTable,{companys:getCompanys(),setSelectedCompany:setSelectedCompany,onEditClick:onEditClick}),/*#__PURE__*/_jsx(CompanyDetails,{detailsInfo:getCompanyDetails()})]}),/*#__PURE__*/_jsx(Modal,{open:modalOpen,onClose:function onClose(){setModalOpen(false);},children:/*#__PURE__*/_jsx(Box,{sx:modalStyle,children:/*#__PURE__*/_jsx(CompanyModal,{data:modalData,setModalOpen:setModalOpen})})})]})]});};export default CompanyInfoView;","map":{"version":3,"names":["React","useState","Box","Typography","Button","AddIcon","Modal","Header","SearchField","CompanyTable","CompanyDetails","CompanyModal","axios","useQuery","matchSorter","modalStyle","position","top","left","transform","bgcolor","width","height","borderRadius","backgroundColor","CompanyInfoView","searchValue","setSearchValue","selectedCompany","setSelectedCompany","modalOpen","setModalOpen","modalData","setModalData","tableKeys","query","post","company_type","data","onAppendCompany","statue","onEditClick","idx","find","element","getCompanys","keys","getCompanyDetails","isLoading","display","alignItems","fontWeight","padding","fontSize","margin","mt","mb","length"],"sources":["/home/song/serp_front/src/views/menu/CompanyInfoView/index.js"],"sourcesContent":["import React from 'react';\r\nimport { useState } from \"react\";\r\n\r\nimport { Box, Typography, Button } from '@mui/material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport Modal from '@mui/material/Modal';\r\n\r\nimport Header from 'src/components/Header';\r\nimport SearchField from 'src/components/SearchField'\r\nimport CompanyTable from 'src/components/CompanyInfo/CompanyTable';\r\nimport CompanyDetails from 'src/components/CompanyInfo/CompanyDetails';\r\nimport CompanyModal from 'src/components/CompanyInfo/CompanyModal';\r\n\r\n\r\nimport axios from \"../../../utils/axios\";\r\nimport { useQuery } from 'react-query';\r\nimport { matchSorter } from 'match-sorter'\r\n\r\n\r\nconst modalStyle = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  bgcolor: 'background.paper',\r\n  width: \"580px\",\r\n  height: \"669px\",\r\n  borderRadius: \"8px\",\r\n  backgroundColor: \"#fff\",\r\n};\r\n\r\nconst CompanyInfoView = () => {\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [selectedCompany, setSelectedCompany] = useState(-1);\r\n\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalData, setModalData] = useState();\r\n\r\n\r\n  const tableKeys = ['company_name', 'represent', 'corporate_number', 'description', 'director', 'position', 'email', 'phone_number', 'address']\r\n\r\n\r\n  const query = useQuery(['companys'], async () => {\r\n    const { data } = await axios.post('/companys/info', { company_type: '발주처' });\r\n    return data.data\r\n  });\r\n\r\n\r\n  const onAppendCompany=(statue)=>{\r\n    setModalData(false); // insert_modal\r\n    setModalOpen(true); // 모달 창 띄우기\r\n  }\r\n\r\n  const onEditClick = (idx) => {\r\n    setModalData(query.data.find(element => {return element.idx === idx})) // update_modal\r\n    setModalOpen(true); // 모달 창 띄우기\r\n    setSelectedCompany(idx);\r\n  }\r\n\r\n  // 보여질 데이터 정렬\r\n  const getCompanys = () => {\r\n    return matchSorter(query.data, searchValue, { keys: tableKeys });\r\n  }\r\n\r\n  // 테이블 클릭 시 옆에 보여질 디테일 정보\r\n  const getCompanyDetails=()=>{\r\n    if(selectedCompany < 0)\r\n      return null;\r\n\r\n    return query.data.find(element => {return element.idx === selectedCompany})\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <Header>\r\n        업체정보\r\n      </Header>\r\n\r\n      {\r\n        query.isLoading ? (<div> Loading </div>) :\r\n          (\r\n            <Box sx={{ height: \"100%\" }}>\r\n              <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\r\n                <SearchField placeholder='업체명, 연락처 등 검색'  setSearchValue={setSearchValue}/>\r\n                <Button variant=\"contained\" \r\n                sx={{\r\n                  fontWeight: 600, width: \"94px\", height: \"37px\", padding: \"9.5px 0px\", fontSize: \"13px\",\r\n                  \"& .MuiButton-startIcon\": {\r\n                    margin: \"0px\"\r\n                  }\r\n                }}\r\n                startIcon={<AddIcon />}\r\n                onClick={()=>{onAppendCompany()}}>\r\n                  업체등록\r\n                </Button>\r\n              </Box>\r\n\r\n              <Typography\r\n                sx={{ fontWeight: 600, fontSize: \"12px\", mt: \"19px\", mb: \"10px\" }} >\r\n                총 업체({getCompanys().length})\r\n              </Typography>\r\n\r\n\r\n              <Box sx={{ display: \"flex\", height: '100%' }} >\r\n                <CompanyTable companys={getCompanys()} setSelectedCompany={setSelectedCompany} onEditClick={onEditClick} />\r\n                <CompanyDetails detailsInfo={getCompanyDetails()} />\r\n              </Box>\r\n\r\n              {/* 모달 */}\r\n              <Modal\r\n                open={modalOpen}\r\n                onClose={() => { setModalOpen(false) }}>\r\n                <Box sx={modalStyle}>\r\n                  <CompanyModal data={modalData} setModalOpen={setModalOpen} />\r\n                </Box>\r\n              </Modal>\r\n\r\n            </Box>\r\n          )\r\n      }\r\n    </>\r\n\r\n  );\r\n}\r\n\r\nexport default CompanyInfoView;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}