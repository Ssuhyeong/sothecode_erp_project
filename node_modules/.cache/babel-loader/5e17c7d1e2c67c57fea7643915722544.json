{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nconst client = axios.create({\n  baseURL: 'http://127.0.0.1:3001',\n  timeout: 1000,\n  withCredentials: true\n}); // 200 : 성공, 201 : 토큰 재발행, 400 : 인증 X(여러가지 이유),\n// 응답\n\nconst Interceptor = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  useEffect(() => {\n    client.interceptors.response.use(function (response) {\n      return response;\n    }, function (error) {\n      if (error.response && error.response.status === 400) {\n        // [/refresh] 토큰 만료 또는 토큰 비정상 또는 헤더 없음\n        navigate(\"/login\", {\n          replace: true\n        });\n        return;\n      } //  [/api (jwt_verify)]에서 오는 에러 코드  or 기존 요청 에러 코드\n\n\n      return Promise.reject(error);\n    });\n  }, []);\n  return children;\n};\n\n_s(Interceptor, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Interceptor;\nexport default client;\nexport { Interceptor };\n\nvar _c;\n\n$RefreshReg$(_c, \"Interceptor\");","map":{"version":3,"names":["axios","useEffect","useNavigate","client","create","baseURL","timeout","withCredentials","Interceptor","children","navigate","interceptors","response","use","error","status","replace","Promise","reject"],"sources":["/home/song/serp_front/src/utils/axios_api.js"],"sourcesContent":["import axios from 'axios';\nimport { useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\n\nconst client = axios.create(\n  {\n    baseURL : 'http://127.0.0.1:3001',\n    timeout: 1000,\n    withCredentials : true\n  }\n);\n\n\n// 200 : 성공, 201 : 토큰 재발행, 400 : 인증 X(여러가지 이유),\n\n// 응답\nconst Interceptor = ({children}) => {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    client.interceptors.response.use(\n      function (response) {\n        return response\n      },\n      function (error) {\n        if (error.response && error.response.status === 400) {\n            // [/refresh] 토큰 만료 또는 토큰 비정상 또는 헤더 없음\n            navigate(\"/login\", { replace: true })\n            return;\n          \n        }\n        //  [/api (jwt_verify)]에서 오는 에러 코드  or 기존 요청 에러 코드\n        return Promise.reject(error) \n      }\n    )\n  }, [])\n  return children;\n}\n\n\nexport default client;\nexport {Interceptor};"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,MAAMC,MAAM,GAAGH,KAAK,CAACI,MAAN,CACb;EACEC,OAAO,EAAG,uBADZ;EAEEC,OAAO,EAAE,IAFX;EAGEC,eAAe,EAAG;AAHpB,CADa,CAAf,C,CASA;AAEA;;AACA,MAAMC,WAAW,GAAG,QAAgB;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;EAClC,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;EAEAD,SAAS,CAAC,MAAM;IACdE,MAAM,CAACQ,YAAP,CAAoBC,QAApB,CAA6BC,GAA7B,CACE,UAAUD,QAAV,EAAoB;MAClB,OAAOA,QAAP;IACD,CAHH,EAIE,UAAUE,KAAV,EAAiB;MACf,IAAIA,KAAK,CAACF,QAAN,IAAkBE,KAAK,CAACF,QAAN,CAAeG,MAAf,KAA0B,GAAhD,EAAqD;QACjD;QACAL,QAAQ,CAAC,QAAD,EAAW;UAAEM,OAAO,EAAE;QAAX,CAAX,CAAR;QACA;MAEH,CANc,CAOf;;;MACA,OAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;IACD,CAbH;EAeD,CAhBQ,EAgBN,EAhBM,CAAT;EAiBA,OAAOL,QAAP;AACD,CArBD;;GAAMD,W;UACaN,W;;;KADbM,W;AAwBN,eAAeL,MAAf;AACA,SAAQK,WAAR"},"metadata":{},"sourceType":"module"}