{"ast":null,"code":"var _jsxFileName = \"/home/song/serp_front/src/components/Guard.js\";\nimport api from 'src/utils/axios_api';\nimport { Outlet, Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Guard = () => {\n  const data = awapi.post('/refresh').then(res => {\n    if (data.status == 201) {\n      // 엑세스만 재발행\n      localStorage.removeItem('user');\n      localStorage.setItem('user', JSON.stringify(data.data, ['accessToken', 'refreshToken']));\n    }\n\n    return true;\n  }).catch(err => {\n    // 401 : 엑세스 토큰만 만료이지만 안옴\n    // 엑세스, 리프레쉬 토큰이 이상하거나 없음, 헤더가 없거나\n    return false;\n  });\n  const auth = authUser();\n  console.log(auth);\n  return auth ? /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 19\n  }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n    replace: true,\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 32\n  }, this);\n};\n\n_c = Guard;\nexport default Guard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Guard\");","map":{"version":3,"names":["api","Outlet","Navigate","Guard","data","awapi","post","then","res","status","localStorage","removeItem","setItem","JSON","stringify","catch","err","auth","authUser","console","log"],"sources":["/home/song/serp_front/src/components/Guard.js"],"sourcesContent":["import api from 'src/utils/axios_api'\r\nimport { Outlet, Navigate } from \"react-router-dom\";\r\n\r\nconst Guard = () => {\r\n\r\n        const data = awapi.post('/refresh')\r\n        .then((res)=>{\r\n            if (data.status == 201) { // 엑세스만 재발행\r\n                localStorage.removeItem('user')\r\n                localStorage.setItem('user', JSON.stringify(data.data, ['accessToken', 'refreshToken']))\r\n            }\r\n            return true;\r\n        })\r\n        .catch((err)=>{\r\n\r\n            // 401 : 엑세스 토큰만 만료이지만 안옴\r\n            // 엑세스, 리프레쉬 토큰이 이상하거나 없음, 헤더가 없거나\r\n            return false;\r\n        })\r\n    \r\n\r\n    const auth = authUser();\r\n    console.log(auth)\r\n    return auth ? <Outlet /> : <Navigate replace to=\"/login\" /> ;\r\n\r\n\r\n};\r\n\r\n\r\nexport default Guard;\r\n"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,qBAAhB;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,kBAAjC;;;AAEA,MAAMC,KAAK,GAAG,MAAM;EAEZ,MAAMC,IAAI,GAAGC,KAAK,CAACC,IAAN,CAAW,UAAX,EACZC,IADY,CACNC,GAAD,IAAO;IACT,IAAIJ,IAAI,CAACK,MAAL,IAAe,GAAnB,EAAwB;MAAE;MACtBC,YAAY,CAACC,UAAb,CAAwB,MAAxB;MACAD,YAAY,CAACE,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeV,IAAI,CAACA,IAApB,EAA0B,CAAC,aAAD,EAAgB,cAAhB,CAA1B,CAA7B;IACH;;IACD,OAAO,IAAP;EACH,CAPY,EAQZW,KARY,CAQLC,GAAD,IAAO;IAEV;IACA;IACA,OAAO,KAAP;EACH,CAbY,CAAb;EAgBJ,MAAMC,IAAI,GAAGC,QAAQ,EAArB;EACAC,OAAO,CAACC,GAAR,CAAYH,IAAZ;EACA,OAAOA,IAAI,gBAAG,QAAC,MAAD;IAAA;IAAA;IAAA;EAAA,QAAH,gBAAgB,QAAC,QAAD;IAAU,OAAO,MAAjB;IAAkB,EAAE,EAAC;EAArB;IAAA;IAAA;IAAA;EAAA,QAA3B;AAGH,CAvBD;;KAAMd,K;AA0BN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}