{"ast":null,"code":"import _slicedToArray from\"/home/song/serp_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import PropTypes from'prop-types';import{useNavigate}from\"react-router-dom\";import axios from'src/utils/axios';// 로그인 페이지(로그인 세션O) 들어갈때\nimport{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RouterGuard=function RouterGuard(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var navigate=useNavigate();var isPost=false;useEffect(function(){if(isPost)return;isPost=true;axios.post('/jwt').then(function(res){// 토큰 o -> main page\nnavigate(\"/\",{replace:true});}).catch(function(err){// 토큰x -> login page\n// 토큰 x\nsetLoading(false);});},[]);if(loading)return/*#__PURE__*/_jsx(_Fragment,{children:\"Loading\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",children,\"   \"]});};RouterGuard.propTypes={children:PropTypes.node};export default RouterGuard;","map":{"version":3,"names":["React","useEffect","useState","PropTypes","useNavigate","axios","RouterGuard","children","loading","setLoading","navigate","isPost","post","then","res","replace","catch","err","propTypes","node"],"sources":["/home/song/serp_front/src/components/RouterGuard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useNavigate } from \"react-router-dom\";\n\nimport axios from 'src/utils/axios'\n\n// 로그인 페이지(로그인 세션O) 들어갈때\nconst RouterGuard = ({ children }) => {\n    const [loading, setLoading] = useState(true);\n    const navigate = useNavigate();\n    let isPost = false;\n\n    useEffect(() => {\n        if (isPost)\n            return;\n        isPost = true;\n\n        axios.post('/jwt')\n            .then((res) => { // 토큰 o -> main page\n                navigate(\"/\", { replace: true })\n            })\n            .catch((err) => { // 토큰x -> login page\n                // 토큰 x\n                setLoading(false)\n            })\n\n    }, [])\n\n    if (loading)\n        return (<>Loading</>);\n\n    return (\n        <> {children}   </>\n    );\n};\n\nRouterGuard.propTypes = {\n    children: PropTypes.node\n};\n\nexport default RouterGuard;\n"],"mappings":"2GAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,UAAP,KAAsB,YAAtB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,MAAOC,MAAP,KAAkB,iBAAlB,CAEA;6IACA,GAAMC,YAAW,CAAG,QAAdA,YAAc,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAClC,cAA8BL,QAAQ,CAAC,IAAD,CAAtC,wCAAOM,OAAP,eAAgBC,UAAhB,eACA,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CACA,GAAIO,OAAM,CAAG,KAAb,CAEAV,SAAS,CAAC,UAAM,CACZ,GAAIU,MAAJ,CACI,OACJA,MAAM,CAAG,IAAT,CAEAN,KAAK,CAACO,IAAN,CAAW,MAAX,EACKC,IADL,CACU,SAACC,GAAD,CAAS,CAAE;AACbJ,QAAQ,CAAC,GAAD,CAAM,CAAEK,OAAO,CAAE,IAAX,CAAN,CAAR,CACH,CAHL,EAIKC,KAJL,CAIW,SAACC,GAAD,CAAS,CAAE;AACd;AACAR,UAAU,CAAC,KAAD,CAAV,CACH,CAPL,EASH,CAdQ,CAcN,EAdM,CAAT,CAgBA,GAAID,OAAJ,CACI,mBAAQ,oCAAR,CAEJ,mBACI,+BAAID,QAAJ,SADJ,CAGH,CA3BD,CA6BAD,WAAW,CAACY,SAAZ,CAAwB,CACpBX,QAAQ,CAAEJ,SAAS,CAACgB,IADA,CAAxB,CAIA,cAAeb,YAAf"},"metadata":{},"sourceType":"module"}