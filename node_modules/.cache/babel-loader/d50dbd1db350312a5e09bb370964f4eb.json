{"ast":null,"code":"import axios from 'axios';\nconst client = axios.create({\n  baseURL: 'http://127.0.0.1:3001',\n  timeout: 1000\n});\nclient.interceptors.request.use(function (config) {\n  const user = localStorage.getItem('user');\n\n  if (!user) {\n    config.headers[\"Authorization\"] = null;\n    config.headers[\"refreshToken\"] = null;\n    return config;\n  }\n\n  const {\n    accessToken,\n    refreshToken\n  } = JSON.parse(user);\n  config.headers[\"Authorization\"] = `Bearer ${accessToken}`;\n  config.headers[\"refreshToken\"] = refreshToken;\n  return config;\n}); // client.interceptors.response.use(\n//   function (response) {\n//     return response\n//   },\n//   async function (error) {\n//     if (error.response && error.response.status === 401) {\n//       try {\n//         //  엑세스 토큰 만료\n//         const originalRequest = error.config;\n//         const data = await client.post('/refresh')\n//         if (data.status == 201) { // 엑세스만 재발행\n//           const { accessToken, refreshToken } = data.data.data\n//           localStorage.removeItem('user')\n//           localStorage.setItem('user', JSON.stringify(data.data.data, ['accessToken', 'refreshToken']))\n//           originalRequest.headers['Authorization'] = `Bearer ${accessToken}`;\n//           originalRequest.headers['refreshToken'] = refreshToken;\n//           return await client.request(originalRequest); // 재설정 및 원래 리퀘스트 \n//         }\n//       } catch (error) {\n//         // [/refresh] 토큰 만료 또는 토큰 비정상 또는 헤더 없음\n//         // 로그인 으로\n//         localStorage.removeItem('user');\n//         \n//         return Promise.reject(error)\n//       }\n//     }\n//     //  [/api (jwt_verify)]에서 오는 에러 코드  or 기존 요청 에러 코드\n//     return Promise.reject(error) \n//   }\n// )\n\nexport default client;","map":{"version":3,"names":["axios","client","create","baseURL","timeout","interceptors","request","use","config","user","localStorage","getItem","headers","accessToken","refreshToken","JSON","parse"],"sources":["/home/song/serp_front/src/utils/axios_api.js"],"sourcesContent":["import axios from 'axios';\n\nconst client = axios.create(\n  {\n    baseURL : 'http://127.0.0.1:3001',\n    timeout: 1000,\n  }\n);\n\nclient.interceptors.request.use(\n  function (config) {\n    const user = localStorage.getItem('user');\n    if (!user) {\n      config.headers[\"Authorization\"] = null;\n      config.headers[\"refreshToken\"] = null;\n      return config\n    }\n    const { accessToken, refreshToken } = JSON.parse(user)\n    config.headers[\"Authorization\"] = `Bearer ${accessToken}`;\n    config.headers[\"refreshToken\"] = refreshToken;\n    return config\n  }\n)\n\n// client.interceptors.response.use(\n//   function (response) {\n//     return response\n//   },\n//   async function (error) {\n//     if (error.response && error.response.status === 401) {\n//       try {\n//         //  엑세스 토큰 만료\n//         const originalRequest = error.config;\n//         const data = await client.post('/refresh')\n\n//         if (data.status == 201) { // 엑세스만 재발행\n//           const { accessToken, refreshToken } = data.data.data\n//           localStorage.removeItem('user')\n//           localStorage.setItem('user', JSON.stringify(data.data.data, ['accessToken', 'refreshToken']))\n//           originalRequest.headers['Authorization'] = `Bearer ${accessToken}`;\n//           originalRequest.headers['refreshToken'] = refreshToken;\n//           return await client.request(originalRequest); // 재설정 및 원래 리퀘스트 \n//         }\n//       } catch (error) {\n//         // [/refresh] 토큰 만료 또는 토큰 비정상 또는 헤더 없음\n//         // 로그인 으로\n//         localStorage.removeItem('user');\n//         \n//         return Promise.reject(error)\n//       }\n//     }\n//     //  [/api (jwt_verify)]에서 오는 에러 코드  or 기존 요청 에러 코드\n//     return Promise.reject(error) \n//   }\n// )\n\n\n\nexport default client;\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,MAAM,GAAGD,KAAK,CAACE,MAAN,CACb;EACEC,OAAO,EAAG,uBADZ;EAEEC,OAAO,EAAE;AAFX,CADa,CAAf;AAOAH,MAAM,CAACI,YAAP,CAAoBC,OAApB,CAA4BC,GAA5B,CACE,UAAUC,MAAV,EAAkB;EAChB,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;;EACA,IAAI,CAACF,IAAL,EAAW;IACTD,MAAM,CAACI,OAAP,CAAe,eAAf,IAAkC,IAAlC;IACAJ,MAAM,CAACI,OAAP,CAAe,cAAf,IAAiC,IAAjC;IACA,OAAOJ,MAAP;EACD;;EACD,MAAM;IAAEK,WAAF;IAAeC;EAAf,IAAgCC,IAAI,CAACC,KAAL,CAAWP,IAAX,CAAtC;EACAD,MAAM,CAACI,OAAP,CAAe,eAAf,IAAmC,UAASC,WAAY,EAAxD;EACAL,MAAM,CAACI,OAAP,CAAe,cAAf,IAAiCE,YAAjC;EACA,OAAON,MAAP;AACD,CAZH,E,CAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA,eAAeP,MAAf"},"metadata":{},"sourceType":"module"}