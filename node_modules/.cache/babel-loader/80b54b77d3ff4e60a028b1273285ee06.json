{"ast":null,"code":"import _slicedToArray from\"/home/song/serp_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import PropTypes from'prop-types';import{useNavigate}from\"react-router-dom\";import axios from'src/utils/axios';// 각종페이지(로그인 세션X) 들어갈때\nimport{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var LoginGuard=function LoginGuard(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];// const navigate = useNavigate();\nvar isPost=false;useEffect(function(){if(isPost)return;isPost=true;axios.post('/jwt').then(function(res){// 토큰 o -> ... page\nsetLoading(false);});// 토큰x -> axios에서 처리\n},[]);if(loading)return/*#__PURE__*/_jsx(_Fragment,{});return/*#__PURE__*/_jsx(_Fragment,{children:children});};LoginGuard.propTypes={children:PropTypes.node};export default LoginGuard;","map":{"version":3,"names":["React","useEffect","useState","PropTypes","useNavigate","axios","LoginGuard","children","loading","setLoading","isPost","post","then","res","propTypes","node"],"sources":["/home/song/serp_front/src/components/LoginGuard.js"],"sourcesContent":["\r\nimport React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport axios from 'src/utils/axios'\r\n\r\n// 각종페이지(로그인 세션X) 들어갈때\r\nconst LoginGuard = ({ children }) => {\r\n    const [loading, setLoading] = useState(true);\r\n    // const navigate = useNavigate();\r\n     let isPost = false;\r\n\r\n    useEffect(() => {\r\n         if (isPost)\r\n             return;\r\n         isPost = true;\r\n        axios.post('/jwt')\r\n            .then((res) => { // 토큰 o -> ... page\r\n                setLoading(false)\r\n            }) // 토큰x -> axios에서 처리\r\n    }, [])\r\n\r\n    if (loading)\r\n        return <></>;\r\n\r\n\r\n    return (\r\n        <>\r\n            {children}\r\n        </>\r\n    );\r\n};\r\n\r\nLoginGuard.propTypes = {\r\n    children: PropTypes.node\r\n};\r\n\r\nexport default LoginGuard;\r\n"],"mappings":"2GACA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,UAAP,KAAsB,YAAtB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,MAAOC,MAAP,KAAkB,iBAAlB,CAEA;gGACA,GAAMC,WAAU,CAAG,QAAbA,WAAa,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CACjC,cAA8BL,QAAQ,CAAC,IAAD,CAAtC,wCAAOM,OAAP,eAAgBC,UAAhB,eACA;AACC,GAAIC,OAAM,CAAG,KAAb,CAEDT,SAAS,CAAC,UAAM,CACX,GAAIS,MAAJ,CACI,OACJA,MAAM,CAAG,IAAT,CACDL,KAAK,CAACM,IAAN,CAAW,MAAX,EACKC,IADL,CACU,SAACC,GAAD,CAAS,CAAE;AACbJ,UAAU,CAAC,KAAD,CAAV,CACH,CAHL,EAGO;AACV,CARQ,CAQN,EARM,CAAT,CAUA,GAAID,OAAJ,CACI,mBAAO,kBAAP,CAGJ,mBACI,yBACKD,QADL,EADJ,CAKH,CAxBD,CA0BAD,UAAU,CAACQ,SAAX,CAAuB,CACnBP,QAAQ,CAAEJ,SAAS,CAACY,IADD,CAAvB,CAIA,cAAeT,WAAf"},"metadata":{},"sourceType":"module"}